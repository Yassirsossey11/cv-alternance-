/* Design tokens */
:root {
  --bg: #0a0e1a;
  --bg-alt: #0f1420;
  --text: #d4e4ff;
  --muted: #9db4d8;
  --primary: #6aa9ff;
  --primary-700: #3a83ff;
  --card: rgba(18, 25, 40, 0.75);
  --border: #2a3550;
  --shadow: 0 6px 24px rgba(0,0,0,0.35);
}

.light {
  --bg: #f5f8f2;
  --bg-alt: #e8f0e3;
  --text: #1f3a29;
  --muted: #4a6b54;
  --primary: #3a7d44;
  --primary-700: #2d6235;
  --card: rgba(255, 255, 255, 0.85);
  --border: #b8d4b8;
  --shadow: 0 6px 20px rgba(30, 50, 35, 0.15);
}

* { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background:
    radial-gradient(ellipse 1400px 900px at 20% 10%, rgba(26, 34, 53, 0.6) 0%, transparent 60%),
    radial-gradient(ellipse 1000px 700px at 80% 70%, rgba(42, 53, 80, 0.4) 0%, transparent 50%),
    linear-gradient(180deg, #0a0e1a 0%, #141a2e 50%, #0a0e1a 100%);
}

.light body, body.light {
  background:
    linear-gradient(0deg, rgba(0,0,0,0.1), rgba(0,0,0,0.05)),
    linear-gradient(45deg, rgba(34, 139, 34, 0.1), rgba(0, 100, 0, 0.05)),
    url('../img/forest.png') center / cover no-repeat fixed,
    linear-gradient(135deg, #f0f8f0 0%, #e8f5e8 50%, #f0f8f0 100%);
}

/* Mobile forest visibility improvement */
@media (max-width: 768px) {
  .light body, body.light {
    background:
      linear-gradient(0deg, rgba(0,0,0,0.05), rgba(0,0,0,0.02)),
      linear-gradient(30deg, rgba(34, 139, 34, 0.15), rgba(0, 100, 0, 0.08)),
      linear-gradient(120deg, rgba(50, 205, 50, 0.1), rgba(144, 238, 144, 0.05)),
      url('../img/forest.png') center / cover no-repeat fixed,
      linear-gradient(135deg, #f0f8f0 0%, #e8f5e8 30%, #f0fff0 70%, #f0f8f0 100%);
  }
  
  /* Mobile forest animations - more butterflies and flowers */
  .light body::before, body.light::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
    background-image: 
      /* Butterflies - more variety */
      radial-gradient(ellipse 3px 1.5px at 20px 30px, #ff6b9d, transparent),
      radial-gradient(ellipse 2px 1px at 50px 70px, #ffd93d, transparent),
      radial-gradient(ellipse 2.5px 1.2px at 80px 40px, #6bcf7f, transparent),
      radial-gradient(ellipse 3px 1.5px at 120px 80px, #ff9a56, transparent),
      radial-gradient(ellipse 2px 1px at 160px 30px, #c44569, transparent),
      radial-gradient(ellipse 2.5px 1.2px at 200px 60px, #a8e6cf, transparent),
      radial-gradient(ellipse 3px 1.5px at 30px 120px, #ff8a80, transparent),
      radial-gradient(ellipse 2px 1px at 70px 150px, #ffb74d, transparent),
      radial-gradient(ellipse 2.5px 1.2px at 110px 20px, #e1bee7, transparent),
      radial-gradient(ellipse 3px 1.5px at 150px 100px, #f8bbd9, transparent),
      /* Falling flowers - more variety */
      radial-gradient(ellipse 4px 2px at 10px 20px, #ffb3ba, transparent),
      radial-gradient(ellipse 3px 1.5px at 40px 50px, #ffdfba, transparent),
      radial-gradient(ellipse 5px 2.5px at 70px 80px, #ffffba, transparent),
      radial-gradient(ellipse 4px 2px at 100px 30px, #baffc9, transparent),
      radial-gradient(ellipse 3px 1.5px at 130px 60px, #bae1ff, transparent),
      radial-gradient(ellipse 5px 2.5px at 160px 90px, #ffc1cc, transparent),
      radial-gradient(ellipse 4px 2px at 190px 40px, #e1bee7, transparent),
      radial-gradient(ellipse 3px 1.5px at 25px 110px, #f8bbd9, transparent),
      radial-gradient(ellipse 5px 2.5px at 55px 140px, #c8e6c9, transparent),
      radial-gradient(ellipse 4px 2px at 85px 10px, #dcedc8, transparent);
    background-size: 150px 120px, 130px 100px, 110px 80px, 90px 60px, 70px 40px,
                     120px 100px, 100px 80px, 80px 60px, 60px 40px, 40px 20px,
                     100px 80px, 80px 60px, 60px 40px, 40px 20px, 30px 15px,
                     90px 70px, 70px 50px, 50px 30px, 30px 15px, 20px 10px;
    animation: butterflyFloat 8s ease-in-out infinite;
  }
  
  /* Additional layer of animations */
  .light body::after, body.light::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
    background-image: 
      /* More butterflies at different positions */
      radial-gradient(ellipse 2px 1px at 35px 45px, #ff6b9d, transparent),
      radial-gradient(ellipse 3px 1.5px at 75px 95px, #ffd93d, transparent),
      radial-gradient(ellipse 2.5px 1.2px at 115px 55px, #6bcf7f, transparent),
      radial-gradient(ellipse 2px 1px at 155px 105px, #ff9a56, transparent),
      radial-gradient(ellipse 3px 1.5px at 195px 45px, #c44569, transparent),
      radial-gradient(ellipse 2.5px 1.2px at 15px 135px, #a8e6cf, transparent),
      radial-gradient(ellipse 2px 1px at 55px 25px, #ff8a80, transparent),
      radial-gradient(ellipse 3px 1.5px at 95px 175px, #ffb74d, transparent),
      /* More falling flowers */
      radial-gradient(ellipse 4px 2px at 45px 35px, #ffb3ba, transparent),
      radial-gradient(ellipse 3px 1.5px at 85px 65px, #ffdfba, transparent),
      radial-gradient(ellipse 5px 2.5px at 125px 95px, #ffffba, transparent),
      radial-gradient(ellipse 4px 2px at 165px 45px, #baffc9, transparent),
      radial-gradient(ellipse 3px 1.5px at 5px 75px, #bae1ff, transparent),
      radial-gradient(ellipse 5px 2.5px at 145px 125px, #ffc1cc, transparent);
    background-size: 140px 110px, 120px 90px, 100px 70px, 80px 50px, 60px 30px,
                     100px 80px, 80px 60px, 60px 40px, 40px 20px, 30px 15px,
                     90px 70px, 70px 50px, 50px 30px, 30px 15px, 20px 10px,
                     80px 60px, 60px 40px, 40px 20px, 30px 15px, 20px 10px;
    animation: flowerFall 12s linear infinite;
    animation-delay: 3s;
  }
}

/* Butterfly floating animation for mobile */
@keyframes butterflyFloat {
  0% { 
    transform: translateY(0px) translateX(0px) rotate(0deg);
    opacity: 0.6;
  }
  25% { 
    transform: translateY(-15px) translateX(8px) rotate(2deg);
    opacity: 0.9;
  }
  50% { 
    transform: translateY(-25px) translateX(-5px) rotate(-1deg);
    opacity: 1;
  }
  75% { 
    transform: translateY(-10px) translateX(12px) rotate(1deg);
    opacity: 0.8;
  }
  100% { 
    transform: translateY(0px) translateX(0px) rotate(0deg);
    opacity: 0.6;
  }
}

/* Flower falling animation for mobile */
@keyframes flowerFall {
  0% { 
    transform: translateY(-100vh) translateX(0px) rotate(0deg);
    opacity: 0;
  }
  10% { 
    opacity: 0.8;
  }
  50% { 
    transform: translateY(-50vh) translateX(10px) rotate(180deg);
    opacity: 1;
  }
  90% { 
    transform: translateY(10vh) translateX(-5px) rotate(360deg);
    opacity: 0.6;
  }
  100% { 
    transform: translateY(100vh) translateX(0px) rotate(360deg);
    opacity: 0;
  }
}

/* Fullscreen stars canvas */
#stars-canvas { 
  position: fixed; 
  inset: 0; 
  width: 100vw; 
  height: 100vh; 
  z-index: -1; 
  display: block;
  will-change: transform;
  transform: translateZ(0); /* Force hardware acceleration */
}
.light #stars-canvas { display: none; }

#mist-canvas { 
  position: fixed; 
  inset: 0; 
  width: 100vw; 
  height: 100vh; 
  z-index: -1; 
  display: none;
  will-change: transform;
  transform: translateZ(0); /* Force hardware acceleration */
}
.light #mist-canvas { display: block; }

img { max-width: 100%; display: block; }

.container {
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 20px;
}

.container.narrow { max-width: 850px; }

.section { padding: 64px 0; }
.section.alt { background: var(--bg-alt); }

h1, h2, h3 { line-height: 1.2; margin: 0 0 16px; }
h1 { font-size: 40px; letter-spacing: -0.02em; }
h2 { font-size: 28px; margin-bottom: 24px; }
h3 { font-size: 20px; }
p { color: var(--text); opacity: 0.95; margin: 0 0 16px; }
.subtitle { color: var(--muted); margin-top: -6px; }

.badge { display: inline-flex; align-items: center; gap: 8px; margin: 10px 0 0; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); background: color-mix(in oklab, var(--primary) 12%, var(--card)); color: var(--text); font-weight: 600; font-size: 14px; }

/* Header */
.site-header {
  position: sticky; top: 0; z-index: 50;
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px;
  padding: 14px 20px;
  backdrop-filter: saturate(180%) blur(8px);
  background: color-mix(in oklab, var(--bg) 70%, transparent);
  border-bottom: 1px solid var(--border);
}

.brand {
  display: inline-flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; border-radius: 10px;
  background: linear-gradient(135deg, var(--primary), var(--primary-700));
  color: white; font-weight: 700; text-decoration: none;
}

.nav__toggle { display: none; }
.nav__list { display: flex; gap: 18px; list-style: none; padding: 0; margin: 0; }
.nav__list a { color: var(--muted); text-decoration: none; font-weight: 500; }
.nav__list a:hover, .nav__list a.is-active { color: var(--text); }

.theme-toggle {
  width: 36px; height: 36px; border-radius: 10px; border: 1px solid var(--border);
  background: var(--card); color: var(--text); cursor: pointer;
}

/* Hero */
.hero .container { display: grid; grid-template-columns: 1.3fr 1fr; gap: 32px; align-items: center; }
.glass { background: rgba(10, 20, 35, 0.65); backdrop-filter: saturate(140%) blur(12px); border: 1px solid var(--border); border-radius: 14px; padding: 16px; }
.glass h2, .glass p, .glass li { color: #d4e4ff; font-weight: 500; }
.light .glass { background: rgba(245, 255, 245, 0.75); border-color: rgba(184, 212, 184, 0.6); }
.light .glass h2, .light .glass p, .light .glass li { color: #1f3a29; font-weight: 500; }
.hero__cta { display: flex; gap: 12px; margin-top: 16px; flex-wrap: wrap; }
.socials { display: flex; gap: 16px; margin-top: 10px; }
.socials a, .socials button { color: var(--muted); text-decoration: none; background: none; border: none; cursor: pointer; font: inherit; }
.socials a:hover, .socials button:hover { color: var(--text); }
.hero__image img { width: 240px; height: 240px; object-fit: cover; border-radius: 16px; border: 1px solid var(--border); box-shadow: var(--shadow); margin: 0 auto; }

/* Cards & grids */
.grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 20px; }
.card { background: var(--card); backdrop-filter: blur(8px); border: 1px solid var(--border); border-radius: 14px; box-shadow: var(--shadow); overflow: hidden; }
.card img { 
  transition: transform 0.3s ease, opacity 0.3s ease; 
  width: 100%; 
  height: 200px; 
  object-fit: cover; 
  object-position: center;
  display: block;
  position: relative;
  z-index: 1;
}
.card a:hover img { transform: scale(1.05); opacity: 0.9; }
.card__header { padding: 16px 16px 0; }
.card__body { padding: 16px; }
.card__list { margin: 0; padding: 0 16px 16px 32px; }
.card__actions { display: flex; gap: 10px; }
.timeline { display: grid; gap: 16px; }

/* Tilt effect */
.tilt { will-change: transform; transform-style: preserve-3d; transition: transform .15s ease-out, box-shadow .2s; }
.tilt:hover { box-shadow: 0 12px 32px rgba(0,0,0,.25); }
.tilt img { transform: translateZ(20px); }

/* Buttons */
.btn {
  display: inline-flex; align-items: center; justify-content: center;
  height: 40px; padding: 0 16px; border-radius: 10px; border: 1px solid var(--border);
  background: var(--card); color: var(--text); text-decoration: none; font-weight: 600; cursor: pointer;
}
.btn.primary { background: linear-gradient(135deg, var(--primary), var(--primary-700)); border-color: transparent; color: #fff; }
.btn.outline { background: transparent; }
.btn.small { height: 34px; padding: 0 12px; font-weight: 500; }

/* Tags */
.tags { display: flex; flex-wrap: wrap; gap: 10px; list-style: none; padding: 0; }
.tags li { padding: 8px 12px; border-radius: 999px; border: 1px solid var(--border); background: var(--card); color: var(--text); }

/* Lists */
.list { margin: 0; padding-left: 18px; }
.meta { color: var(--muted); font-size: 14px; }

/* Contact Form */
.contact-form { margin-top: 24px; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 6px; font-weight: 600; color: var(--text); }
.form-group input, .form-group textarea { 
    width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; 
    background: var(--card); color: var(--text); font-family: inherit;
    transition: border-color 0.2s, box-shadow 0.2s;
}
.form-group input:focus, .form-group textarea:focus { 
    outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary) 20%, transparent);
}
.form-status { 
  margin-top: 16px; 
  padding: 12px; 
  border-radius: 8px; 
  font-weight: 500; 
  border: 1px solid var(--border);
  transition: all 0.3s ease;
}
.form-status.success { 
  background: color-mix(in oklab, #22c55e 20%, var(--card)); 
  color: #22c55e; 
  border-color: #22c55e;
}
.form-status.error { 
  background: color-mix(in oklab, #ef4444 20%, var(--card)); 
  color: #ef4444; 
  border-color: #ef4444;
}
.form-status.loading { 
  background: color-mix(in oklab, var(--primary) 20%, var(--card)); 
  color: var(--primary); 
  border-color: var(--primary);
}

/* Footer */
.site-footer { padding: 28px 0; border-top: 1px solid var(--border); background: var(--bg-alt); }
.site-footer p { margin: 0; color: var(--muted); }

/* Responsive */
@media (max-width: 900px) {
  .hero .container { grid-template-columns: 1fr; text-align: center; }
  .hero__image img { margin-top: 10px; }
}

@media (max-width: 760px) {
  .grid { grid-template-columns: 1fr; }
  .nav__toggle { display: inline-flex; align-items: center; justify-content: center; height: 36px; padding: 0 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--card); color: var(--text); }
  .nav__list { position: absolute; top: 58px; right: 12px; flex-direction: column; gap: 0; background: var(--card); border: 1px solid var(--border); border-radius: 12px; box-shadow: var(--shadow); padding: 6px; display: none; }
  .nav__list.is-open { display: flex; }
  .nav__list a { padding: 10px 12px; border-radius: 8px; }
  
  /* Mobile optimizations for canvas effects */
  #stars-canvas, #mist-canvas {
    transform: translateZ(0) scale(1);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  
  /* Ensure project images are visible on mobile */
  .card img {
    height: 180px;
    min-height: 180px;
    background: var(--card);
    border-radius: 8px 8px 0 0;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  .card a {
    display: block;
    position: relative;
    z-index: 10;
  }
  
  /* Ensure hero image is visible on mobile */
  .hero__image img {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 10;
    position: relative;
  }
}

/* Very small screens - further reduce effects */
@media (max-width: 480px) {
  .hero__image img { width: 200px; height: 200px; }
  
  /* Disable complex animations on very small screens */
  .tilt:hover { 
    box-shadow: var(--shadow); 
    transform: none;
  }
}

/* Reduced motion - disable forest animations for accessibility */
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  
  /* Disable forest animations for users who prefer reduced motion */
  .light body::before, body.light::before,
  .light body::after, body.light::after {
    animation: none !important;
    background-image: none !important;
  }
}

/* Performance optimization for mobile animations */
@media (max-width: 768px) {
  .light body::before, body.light::before,
  .light body::after, body.light::after {
    will-change: transform, opacity;
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
}
